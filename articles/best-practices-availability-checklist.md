<properties
   pageTitle="Lista de verificação de disponibilidade | Microsoft Azure"
   description="Lista de verificação que dá-lhe preocupações disponibilidade durante a estruturação."
   services=""
   documentationCenter="na"
   authors="dragon119"
   manager="masimms"
   editor=""
   tags=""/>

<tags
   ms.service="best-practice"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="07/13/2016"
   ms.author="masashin"/>

# <a name="availability-checklist"></a>Lista de verificação de disponibilidade

[AZURE.INCLUDE [pnp-header](../includes/guidance-pnp-header-include.md)]

## <a name="application-design"></a>Estrutura de aplicação

- **Evite qualquer ponto de falha único.** Todos os componentes, serviços, recursos e instâncias de cluster devem ser implementadas como várias instâncias para impedir que um único ponto de falha afetar disponibilidade. Isto inclui mecanismos de autenticação. Estruture a aplicação para ser configurável para utilizar várias instâncias e para detetar falhas e redireccionar pedidos para instâncias-falha onde a plataforma não faça o seguinte automaticamente automaticamente.
- **Decomposição carga de trabalho por diferentes contrato de nível de serviço.** Se é composto por um serviço das cargas de trabalho críticas e menor crítica, geri-las de forma diferente e especifique o número de instâncias às suas necessidades de disponibilidade e funcionalidades de serviço.
- **Minimizar e compreender dependências do serviço.** Minimizar o número de serviços diferentes utilizada sempre que possível e certifique-se de que compreende todas as dependências de funcionalidade e o serviço que existem no sistema. Isto inclui da natureza destas dependências e o impacto das falha ou reduzido desempenho em cada uma delas sobre a aplicação geral. Microsoft garantias, pelo menos, 99,9 por cento disponibilidade para a maioria dos serviços, mas isto significa que cada serviço adicional de uma aplicação baseia-se em potencialmente reduz a disponibilidade geral SLA do seu sistema de por cento 0,1.
- **Estruturar tarefas e as mensagens a ser idempotent (em segurança de forma repetida) sempre que possível**, para que que duplicada pedidos não irão causar problemas. Por exemplo, um serviço pode agir como consumidor que processa as mensagens enviadas como pedidos por outras partes do sistema que agir produtor. Se o consumidor falhar depois de processamento da mensagem, mas antes de confirmar que foi processada, um produtor poderá submeter um pedido de repetição que poderá ser resolvido por outra instância do consumidor. Por este motivo, consumidores e as operações realizam devem ser idempotent para que uma operação de executada anteriormente de repetição não compor os resultados inválidos. Isto pode significa detetar duplicada mensagens ou assegurando a consistência utilizando uma abordagem optimista para resolver conflitos.
- **Utilize um corretor de mensagem que implementa elevada disponibilidade para transações críticas.** Muitos cenários para o início de tarefas ou aceder a serviços remota utilizam as mensagens para transmitir instruções entre a aplicação e o serviço de destino. Para um melhor desempenho, a aplicação deverá conseguir enviar a mensagem e, em seguida, voltar a processar pedidos de mais, sem necessitar de aguardar uma resposta. Para garantir a entrega de mensagens, o sistema de mensagens deve fornecer elevada disponibilidade. Azure filas de mensagens do serviço Bus implementam semântica de _pelo menos uma vez_ . Isto significa que cada mensagem que publicou para uma fila não serão perdida, apesar de cópias duplicadas podem ser entregues em determinadas circunstâncias. Se o processamento de mensagens é idempotent (consulte o item anterior), repetida de entrega não deve ser um problema.
- **Aplicações de estrutura para diminuir o correctamente** quando chegar limites de recursos e tomar adequado ação para minimizar o impacto para o utilizador. Em alguns casos, a carga da aplicação pode exceder a capacidade de um ou mais partes, a causar reduzido disponibilidade e falhou ligações. Dimensionamento pode ajudar a atenuar isto, mas pode atingir um limite de impostos pelo outros fatores, tal como a disponibilidade de recursos ou custo. Estruture a aplicação para que esta situação,-pode automaticamente diminuir, desta forma. Por exemplo, num sistema de comércio eletrónico, se o subsystem de processamento de encomendas for em ocular (ou mesmo falhou completamente), pode ser temporariamente desativada enquanto outras funcionalidades (como navegar no catálogo de produtos) a permitir para continuar. Poderá ser adequado adiar pedidos para um subsystem falhar, por exemplo ainda permitindo aos clientes submeter encomendas mas guardá-los para processamento mais tarde, quando o subsystem encomendas está disponível novamente.
- **Processe eventos de rajada rápido de forma adequada.** A maioria das aplicações necessário processar variadas das cargas de trabalho ao longo do tempo, tal como picos primeiro elemento de manhã numa aplicação empresarial ou quando um novo produto for disponibilizado num site do comércio eletrónico. Dimensionamento automática pode ajudar a gerir a carregar, mas poderá demorar algum tempo para ocorrências adicionais ficar online e gerir pedidos. Impedir que a rajada repentina sobre e inesperada da atividade asfixiam a aplicação: estruturá-lo para pedidos de fila de espera para os serviços que utilize o e diminuir quando filas são perto capacidade total. Certifique-se de que existe suficientes desempenho e capacidade disponível em condições de que não sejam rajada para esgotar as filas e gerir pedidos pendentes. Para obter mais informações, consulte o [padrão de nivelamento de carga baseados em filas](https://msdn.microsoft.com/library/dn589783.aspx).

## <a name="deployment-and-maintenance"></a>Implementação e manutenção

- **Implemente várias instâncias de funções para cada serviço.** Microsoft estabelece garantias de disponibilidade para os serviços que criar e implementar, mas estas garantias só são válidas se implementar, pelo menos, duas instâncias de cada função no serviço. Permite que uma função de não estar disponível, enquanto o outro permanece ativo. Isto é particularmente importante se precisar de implementar actualizações para um sistema direto sem interromper actividades dos clientes; instâncias podem ser redirecionadas para baixo e atualizadas individualmente, enquanto que as outras continuar online.
- **Aplicações de anfitrião no vários centros de dados.** Apesar de extremamente pouco, é possível para um centro de dados inteiro trabalhar offline através de um evento como falhas natural ou falha de Internet. Aplicações empresariais crucial deverão estar alojadas no mais do que um centro de dados para fornecer disponibilidade máxima. Isto pode reduzir a latência para utilizadores locais e fornecer oportunidades adicionais para flexibilidade quando atualizar aplicações.
- **Automatizar e tarefas de implementação e manutenção de teste.** Aplicações distribuídas consistem várias peças tem de trabalhar em conjunto. Implementação, por conseguinte, deverá automatizada, utilizando mecanismos testados e provas dadas como scripts e aplicações de implementação. Estes podem atualizar e validar a configuração e automatizar o processo de implementação. Técnicas automatizadas também devem ser utilizadas para executar atualizações de todas ou partes de aplicações. É crucial para testar todos estes processos totalmente para se certificar de que erros não provocam tempo de inatividade adicional. Todas as ferramentas de implementação tem de ter restrições de segurança adequado para proteger a aplicação implementada; definir e impor políticas de implementação cuidadosamente e minimizar a necessidade de intervenção humana.
- **Considere utilizar funcionalidades de teste e de produção da plataforma** onde estes estão disponíveis. Por exemplo, utilizar os ambientes de teste e de produção serviços em nuvem Azure permite que as aplicações ser mudado a partir de uma para outra instantaneamente através de um trocar de endereço IP virtual (VIP trocar). No entanto, se preferir fase no local, ou implementar diferentes versões da aplicação em simultâneo e gradualmente migrar utilizadores, não poderá utilizar uma operação de trocar VIP.
- **Aplicar alterações na configuração sem Reciclagem** a instância sempre que possível. Em muitos casos, as definições de configuração de uma aplicação Azure ou serviço podem ser alteradas sem necessidade da função de ser reiniciado. Função expor eventos que poderá ser resolvidos para detectar alterações à configuração e aplicá-los a componentes dentro da aplicação. No entanto, algumas alterações às definições de plataforma do core necessitam de uma função de ser reiniciado. Durante a criação de componentes e serviços, maximizar a disponibilidade e minimizar o tempo de inatividade ao criar-lhes aceitar as alterações às definições de configuração sem necessidade da aplicação completo de ser reiniciado.
- **Utilize domínios atualização para zero tempo de inatividade durante atualizações.** Azure calcular unidades como web e funções de trabalho são atribuídas atualizar domínios. Domínios atualização agrupe instâncias da função modo a que, quando uma atualização de ficha técnica em ocorre o mais, cada função no domínio de atualização está parada, atualizada e reiniciada sucessivamente. Isto minimiza o impacto na disponibilidade de aplicação. Pode especificar quantos domínios atualização devem ser criados para um serviço quando o serviço é implementado.

    > [AZURE.NOTE] Funções também são distribuídas por domínios falhas, cada um dos quais é razoável independente de outros domínios falhas em termos de bastidor de servidor, power e refrigeração disposição, para minimizar a hipótese de uma falha de afetar todas as instâncias de função. Esta distribuição ocorre automaticamente e não é possível controlar.

- **Configure os conjuntos de disponibilidade para máquinas virtuais Azure.** Colocar duas ou mais máquinas virtuais no mesmo conjunto de disponibilidade garante que estes máquinas virtuais não serão implementadas para o mesmo domínio falhas. Para maximizar disponibilidade, deve criar várias instâncias de cada máquina virtual crítica utilizado pelo seu sistema e coloque estas instâncias no mesmo conjunto de disponibilidade. Se estiver a executar várias máquinas virtuais que ter diferentes finalidades, crie uma disponibilidade configurar para cada máquina virtual. Adicione instâncias de cada máquina virtual para cada conjunto de disponibilidade. Por exemplo, se tiver criado máquinas virtuais em separado para funcionar como um servidor web e um servidor de relatórios, crie uma disponibilidade definido para o servidor web e disponibilidade de outra definir para o servidor de relatórios. Adicione conjunto de instâncias de máquina web servidor virtual para a disponibilidade de servidor web e, adicionar instâncias da máquina de virtual elaboração de relatórios do servidor para o conjunto de disponibilidade elaboração de relatórios do servidor.

## <a name="data-management"></a>Gestão de dados

- **Tirar partido de replicação de dados** através de redundância local e geográfica. Dados no Azure armazenamento são de replicadas automaticamente para proteger contra a perda de em caso de falha de infraestrutura e alguns aspetos desta replicação podem ser configurados. Por exemplo, cópias só de leitura de dados podem ser replicadas na região geográfica mais do que um (designado por armazenamento globalmente redundante de acesso de leitura ou RT GRS). Tenha em atenção que utilizar RT GRS tarifas de adicionais. Para obter detalhes, consulte o artigo [Preços de armazenamento do Azure](https://azure.microsoft.com/pricing/details/storage/).
- **Simultaneidade optimista de utilização e consistência eventual** sempre que possível. Transações que bloquear o acesso aos recursos através de bloqueio (simultaneidade pessimista) pode provocar um desempenho fraco e reduzir consideravelmente disponibilidade. Estes problemas podem ficar especialmente agudos no sistemas distribuídos. Em muitos casos, estrutura cuidadosa e técnicas tal como a partições podem minimizar as hipóteses de atualizações em conflito ocorrer. No caso de dados são replicados ou são de leitura de uma loja separadamente atualizada, os dados só serão eventualmente consistentes. Mas as vantagens normalmente extremidade compensam o impacto na disponibilidade da utilização das transações para assegurar a consistência de imediata.
- **Utilizar periódica cópia de segurança e restauro em qualquer altura**e certifique-se de que cumpre recuperação aponte objectivo (RPO). Regularmente automaticamente agregar dados que não são preservados noutro local e verifique se que pode sujeito restaurar os dados e a própria aplicação deverá ocorrer uma falha. Replicação de dados não é uma funcionalidade de cópia de segurança, porque erros e inconsistências introduzidas através de falha do, erro ou operações maliciosas serão replicadas em todas as lojas. O processo de cópia de segurança tem de ser seguro para proteger os dados estão em trânsito e no armazenamento. Bases de dados ou partes de um arquivo de dados podem normalmente ser recuperados para um ponto anterior em tempo ao utilizar os registos de transações. Microsoft Azure fornece uma funcionalidade de cópia de segurança para os dados armazenados numa base de dados do Azure SQL. Os dados são exportados para um pacote de cópia de segurança sobre o armazenamento de Blobs do Azure e podem ser transferidos para uma localização segura no local para armazenamento.
- **Ative a opção de elevada disponibilidade manter uma cópia de uma cache Azure Redis secundária.** Quando utiliza o Azure Redis Cache, selecione a opção padrão para manter uma cópia do conteúdo secundária. Para mais informações, consulte o artigo [criar uma cache no Azure Redis Cache](https://msdn.microsoft.com/library/dn690516.aspx).

## <a name="errors-and-failures"></a>Erros e falhas

- **Apresentar o conceito de um limite de tempo.** Serviços e recursos poderão ficar indisponíveis, causar pedidos de falha. Certifique-se de que os tempos limite aplicar são adequados para cada serviço ou recurso assim como o cliente que está a acedê-los. (Em alguns casos, pode ser adequado permitir que um tempo limite maior para uma determinada instância de um cliente, consoante o contexto e outras ações que está a executar o cliente.) Limites de tempo muito curto podem causar operações de repetição excessiva para serviços e recursos que têm latência considerável. Limites de tempo muito podem causar se um grande número de pedidos de é colocadas na fila de bloqueio, a aguardar para um recurso para responder ou serviço.
- **Repetir operações falhadas causadas pela falhas breves.** Estruturar uma estratégia de repetição de acesso a todos os serviços e volte a tentar recursos onde não implicitamente suportam a ligação automática. Utilize uma estratégia de que inclui um atraso crescente entre o número de tentativas como o número de falhas aumenta, para evitar a sobrecarga do recurso e permitir que este correctamente recuperar e processar pedidos em fila de espera. Tentativas contínuas com atrasos breve muito provavelmente exacerbate o problema.
- **Parar o envio de pedidos para evitar falhas em cascata** quando os serviços remotos estão indisponíveis. Poderá haver situações em que transitória ou de outros erros, que variam em gravidade a partir de uma perda parcial de conectividade a falhas completa de um serviço, muito demorar mais tempo do que o esperado para regressar ao normal. Para além disso, se um serviço é muito ocupado, falha numa parte do sistema pode conduzir a falhas em cascata e resultar em muitas operações de transformação bloqueadas enquanto mantém para recursos de sistema crítico como memória, tópicos e ligações de base de dados. Em vez de repetir continuamente uma operação que é pouco ser concluída com êxito, a aplicação deverá rapidamente aceita que a operação falhou e processar esta falha de forma adequada. Pode utilizar o padrão de circuito separador de palavras para rejeitar pedidos de operações específicas para períodos definidos. Para obter mais detalhes, consulte o artigo [Padrão de circuito separador de palavras](https://msdn.microsoft.com/library/dn589784.aspx).
- **Compor ou Outono voltar a vários componentes** para mitigar o impacto de um serviço específico que está a ser offline ou indisponível. Estruturar aplicações para tirar partido das várias instâncias sem operação que afectem e ligações existentes, sempre que possível. Utilizar várias instâncias e distribuir pedidos entre eles e detetar e evitar enviar pedidos de instâncias do falha, para poder maximizar disponibilidade.
- **Outono voltar a um serviço diferente ou o fluxo de trabalho** sempre que possível. Por exemplo, se escrever a base de dados do SQL falhar, temporariamente armazene dados no armazenamento de Blobs. Fornece uma funcionalidade para repetir o escreve no armazenamento blob do base de dados SQL quando o serviço de fica disponível. Em alguns casos, uma operação de falha poderá ter uma ação alternativa, que permite que a aplicação continuar a trabalhar mesmo quando um componente ou serviço falha. Se possível, falhas de detetar e redirecionar pedidos para outros serviços que podem oferecer uma funcionalidade alternativa adequada ou para criar cópias de segurança ou instâncias de funcionalidade reduzida que podem manter operações de core enquanto o serviço primário está offline.

## <a name="monitoring-and-disaster-recovery"></a>Recuperação de monitorização e falhas

- **Fornecer instrumentação formatada para falhas provável e eventos de falha** para comunicar a situação ao pessoal de operações. Para falhas que provavelmente mas ainda não ocorreu, fornecer dados suficientes para permitir operações pessoal determinar a causa, mitigar a situação e certifique-se de que o sistema permanece disponível. Para falhas de que já tenham ocorrido, a aplicação deve devolver uma mensagem de erro adequado ao utilizador mas tentativa de continuar a executar, embora com a funcionalidade reduzida. Em todos os casos, o sistema de monitorização deve captura abrangentes detalhes para permitir operações pessoal para que seja aplicada uma recuperação rápida e se for necessário, para designers e programadores para modificar o sistema impedir que a situação surjam novamente.
- **Monitorizar o estado de funcionamento do sistema através da implementação de funções de verificação.** Podem prejudicar a Estado de funcionamento e o desempenho de uma aplicação ao longo do tempo, sem ser evidentes até falhar. Implementar sondas ou verificar funções que são executadas regularmente a partir de fora da aplicação. Estes verificações podem ser tão simples quanto tempo de resposta para a aplicação como um todo, individuais peças da aplicação, serviços individuais que a aplicação utiliza ou componentes individuais de medição. Funções de verificação podem executar processos para se certificar de que produzem resultados válidos, medem latência e verificar a disponibilidade e extrair informações a partir do sistema.
- **Testar regularmente todos os activação e sistemas de contingência** para garantir que estão disponíveis e funcionam como esperado. Alterações para os sistemas e operações poderão afetar activação e funções de contingência, mas não pode ser detetado o impacto até que o sistema principal falha ou fica sobrecarregado. Testá-lo antes de é necessário para o Adquirente na íntegra para um problema direto o tempo de execução.
- **Teste os sistemas de monitorização.** Activação pós-falha automatizado e sistemas de contingência e visualização manual de estado de funcionamento do sistema e desempenho através de dashboards, todas as dependem de monitorização e instrumentação funcionar corretamente. Se estes elementos falharem, informações críticas acertos na, ou imprecisos dados de relatórios, um operador poderá não perceber que o sistema está danificado ou a falhar.
- **Registar o progresso da execução longa fluxos de trabalho** e volte a tentar em caso de falha. Fluxos de trabalho de execução longa com frequência são compostos por vários passos. Certifique-se de que cada passo é independente e pode ser tentada novamente para minimizar a hipótese de que o fluxo de trabalho todo terá de ser revertido ou que várias transações compensadores necessitam de ser executadas. Monitorizar e gerir o progresso da execução longa fluxos de trabalho através da implementação de um padrão, tais como [Scheduler agente autoridade padrão](https://msdn.microsoft.com/library/dn589780.aspx).
- **Planear a recuperação de falhas.** Certifique-se de que existe um plano documentado, aceite e totalmente testado para a recuperação a partir de qualquer tipo de falha que poderão ser compostos parte ou todo o sistema principal indisponível. Teste os procedimentos regularmente e certifique-se de que todos os docentes de operações estiver familiarizados com o processo.
