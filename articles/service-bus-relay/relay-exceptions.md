<properties 
    pageTitle="Exceções de reencaminhamento | Microsoft Azure"
    description="Lista de exceções reencaminhamento e ações sugeridas."
    services="service-bus"
    documentationCenter="na"
    authors="jtaubensee"
    manager="timlt"
    editor="tysonn" />
<tags 
    ms.service="service-bus"
    ms.devlang="na"
    ms.topic="article"
    ms.tgt_pltfrm="na"
    ms.workload="na"
    ms.date="10/28/2016"
    ms.author="jotaub" />

# <a name="relay-exceptions"></a>Exceções de reencaminhamento

Este artigo lista algumas exceções geradas pelo APIs de reencaminhamento do Microsoft Azure. Esta referência está sujeito a alterações, pelo que deve verificar existência de atualizações.

## <a name="exception-categories"></a>Categorias de exceção

API do reencaminhamento gerar exceções que podem abrange as seguintes categorias, juntamente com a ação associada que pode tomar para corrigi-los.

1.  Utilizador codificação de erro ([System. ArgumentException](https://msdn.microsoft.com/library/system.argumentexception.aspx), [System.InvalidOperationException](https://msdn.microsoft.com/library/system.invalidoperationexception.aspx), [System.OperationCanceledException](https://msdn.microsoft.com/library/system.operationcanceledexception.aspx), [System.Runtime.Serialization.SerializationException](https://msdn.microsoft.com/library/system.runtime.serialization.serializationexception.aspx)). Ação geral: tentar corrigir o código antes de continuar.

2.  Erro de configuração / ([Microsoft.ServiceBus.Messaging.MessagingEntityNotFoundException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingentitynotfoundexception.aspx), [System.UnauthorizedAccessException](https://msdn.microsoft.com/library/system.unauthorizedaccessexception.aspx). Ação geral: rever a sua configuração e alterar se for necessário.

3.  Exceções breves ([Microsoft.ServiceBus.Messaging.MessagingException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingexception.aspx), [Microsoft.ServiceBus.Messaging.ServerBusyException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.serverbusyexception.aspx), [Microsoft.ServiceBus.Messaging.MessagingCommunicationException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingcommunicationexception.aspx)). Ação geral: Repetir a operação ou notificar os utilizadores.

4.  Outros exceções ([System.Transactions.TransactionException](https://msdn.microsoft.com/library/system.transactions.transactionexception.aspx), [System.TimeoutException](https://msdn.microsoft.com/library/system.timeoutexception.aspx), [Microsoft.ServiceBus.Messaging.MessageLockLostException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagelocklostexception.aspx), [Microsoft.ServiceBus.Messaging.SessionLockLostException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.sessionlocklostexception.aspx)). Ação geral: específicas para o tipo de exceção; consulte a tabela na secção seguinte. 

## <a name="exception-types"></a>Tipos de exceção

A tabela seguinte lista os tipos de exceção mensagens e os respetivos causas e ação sugerida notas que pode tomar.

| **Tipo de exceção**                                                                                                                                                                                                                                                                                | **Descrição/causa/exemplos**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | **Ação sugerida**                                                                                                                                                                                                                                                                                                                                                                                                          | **Nota sobre a repetir automático imediata**                                                                                             |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------|
| [TimeoutException](https://msdn.microsoft.com/library/system.timeoutexception.aspx)                                                                                                                                                                                                           | O servidor não respondeu para a operação pedida no período de tempo especificado que é controlada pelo [OperationTimeout](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingfactorysettings.operationtimeout.aspx). O servidor poderá ter concluído a operação pedida. Isto pode acontecer devido a ou outros atrasos de infraestrutura de rede.                                                                                                                                                                                                                                                                   | Verificar o estado do sistema para consistência e volte a tentar se for necessário. Consulte o artigo [exceções de tempo limite](#timeoutexception).                                                                                                                                                                                                                                                                                                                                                           | Repetir poderão ajudar em alguns casos; Adicione lógica de repetir a código.                                                                      |
| [InvalidOperationException](https://msdn.microsoft.com/library/system.invalidoperationexception.aspx)                                                                                                                                                                                         | A operação de utilizador pedidas não é permitida no servidor ou serviço. Ver a mensagem de exceção para obter detalhes. Por exemplo, [concluída](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.brokeredmessage.complete.aspx) irá gerar esta exceção se a mensagem foi recebida no modo de **ReceiveAndDelete** .                                                                                                                                                                                                                                                                                                     | Verificar o código e a documentação. Certificar-se de que a operação solicitada é válida.                                                                                                                                                                                                                                                                                                                                         | Repetir não irá ajudar.                                                                                                          |
| [OperationCanceledException](https://msdn.microsoft.com/library/system.operationcanceledexception.aspx)                                                                                                                                                                                       | Uma tentativa para invocar uma operação um objeto que já foi fechado, interrompida ou eliminada. Em casos raros, a transação ambiente já é eliminada.                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Verifique o código e certifique-se de que não invocar operações num objeto eliminado.                                                                                                                                                                                                                                                                                                                                          | Repetir não irá ajudar.                                                                                                          |
| [UnauthorizedAccessException](https://msdn.microsoft.com/library/system.unauthorizedaccessexception.aspx)                                                                                                                                                                                     | O objeto [TokenProvider](https://msdn.microsoft.com/library/azure/microsoft.servicebus.tokenprovider.aspx) não foi possível obter um token, o token é inválido ou o token não contém as afirmações necessárias para executar a operação.                                                                                                                                                                                                                                                                                                                                                                                                  | Certifique-se de que o fornecedor de tokens é criado com os valores corretos. Verifique a configuração do serviço do controlo de acesso.                                                                                                                                                                                                                                                                                                   | Repetir poderão ajudar em alguns casos; Adicione lógica de repetir a código.                                                                      |
| [ArgumentException](https://msdn.microsoft.com/library/system.argumentexception.aspx)<br /> [ArgumentNullException](https://msdn.microsoft.com/library/system.argumentnullexception.aspx)<br />[ArgumentOutOfRangeException](https://msdn.microsoft.com/library/system.argumentoutofrangeexception.aspx) | Um ou mais argumentos fornecidos para o método são inválidos.<br /> O URI fornecido para [NamespaceManager](https://msdn.microsoft.com/library/azure/microsoft.servicebus.namespacemanager.aspx) ou [Criar](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingfactory.create.aspx) contém segment(s) do caminho.<br /> O esquema de URI fornecido para [NamespaceManager](https://msdn.microsoft.com/library/azure/microsoft.servicebus.namespacemanager.aspx) ou [Criar](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingfactory.create.aspx) é inválido. <br />O valor da propriedade é maior do que 32KB. | Verifique o código de chamada e certifique-se que os argumentos estão corretos.                                                                                                                                                                                                                                                                                                                                                           | Repetir não irá ajudar.                                                                                                          |
| [ServerBusyException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.serverbusyexception.aspx)                                                                                                                                                                       | Serviço não é possível processar o pedido, neste momento.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Cliente pode esperar durante um período de tempo, em seguida, repita a operação.                                                                                                                                                                                                                                                                                                                                                           | Após determinado intervalo, o cliente poderá novamente. Se uma repetição resulta numa exceção diferente, consulte o comportamento de repetir desse exceção. |
| [QuotaExceededException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.quotaexceededexception.aspx)                                                                                                                                                                 | A entidade mensagens atingiu o tamanho máximo permitido.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Crie espaço na entidade ao receber mensagens do seus filas subpastas ou a entidade. Consulte o artigo [QuotaExceededException](#quotaexceededexception).                                                                                                                                                                                                                                                                                                                                      | Repetir pode ajudá-se mensagens foram removidas entretanto.                                                               |
| [MessageSizeExceededException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagesizeexceededexception.aspx)                                                                                                                                                     | Uma carga útil mensagem excede o limite de 256K. Note que o limite de 256 k é o tamanho total da mensagem, que pode incluir propriedades do sistema e qualquer sobrecarga .NET.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Reduzir o tamanho de carga de útil a mensagem e, em seguida, repita a operação.                                                                                                                                                                                                                                                                                                                                                         | Repetir não irá ajudar.                                                                                                          |

## <a name="quotaexceededexception"></a>QuotaExceededException

[QuotaExceededException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.quotaexceededexception.aspx) indica que tenha sido ultrapassada uma quota para uma entidade específica.

Para retransmissão, esta exceção é moldado a [System.ServiceModel.QuotaExceededException](https://msdn.microsoft.com/library/system.servicemodel.quotaexceededexception.aspx), que indica que o número máximo de listeners foi excedido para este ponto final. Isto é indicado no valor **MaximumListenersPerEndpoint** da mensagem de exceção.

## <a name="timeoutexception"></a>TimeoutException 

Um [TimeoutException](https://msdn.microsoft.com/library/system.timeoutexception.aspx) indica que uma operação de iniciado pelo utilizador está a demorar mais de tempo limite da operação. 

Deve verificar o valor da propriedade [ServicePointManager.DefaultConnectionLimit](https://msdn.microsoft.com/library/system.net.servicepointmanager.defaultconnectionlimit) , como atingir este limite podem também causa uma [TimeoutException](https://msdn.microsoft.com/library/system.timeoutexception.aspx).

Para retransmissão, poderá receber tempo limite exceções ao abrir primeiro uma ligação de remetente reencaminhamento. Existem duas causas comuns para esta exceção:

1. O valor de [OpenTimeout](https://msdn.microsoft.com/library/wcf.opentimeout.aspx) poderão ser demasiado pequeno (uma fração de um segundo par).
2. O listener(s) de reencaminhamento no local pode não ser de responder (ou poderá encontrar problemas de regras de firewall proibição as listeners de aceitar novas ligações de cliente) e o valor de [OpenTimeout](https://msdn.microsoft.com/library/wcf.opentimeout.aspx) for menor que cerca de 20 segundos.

Por exemplo:

```
'System.TimeoutException’: The operation did not complete within the allotted timeout of 00:00:10. The time allotted to this operation may have been a portion of a longer timeout.
```

### <a name="common-causes"></a>Causas mais comuns

Existem duas causas comuns para este erro: configuração incorreta, ou um erro de serviço breves.

1. **Configuração incorreta** 
    o tempo limite da operação poderão ser demasiado pequeno para a condição operacional. O valor predefinido para o tempo limite da operação no cliente do SDK é 60 segundos. Verifique se o seu código tem o valor definido para algo demasiado pequeno. Tenha em atenção que a condição da rede e a utilização da CPU pode afetar o tempo necessário para uma operação específica concluir, para que o tempo limite da operação não deveria ser definido com um valor muito pequeno.

2. **Erro do serviço breves** 
    reencaminhamento, por vezes, podem ocorrer atrasos na processamento de pedidos; Por exemplo, durante períodos de tráfego alto. Nestes casos, pode repetir a operação após um atraso, até que a operação de é efetuada com êxito. Se continuar a mesma operação falhar após várias tentativas, visite o [site de estado do serviço Azure](https://azure.microsoft.com/status/) para ver se há qualquer falhas de serviço conhecido.

## <a name="next-steps"></a>Passos seguintes:

- [Reencaminhamento perguntas mais frequentes](relay-faq.md)
- [Criar um espaço de nomes](relay-create-namespace-portal.md)
- [Introdução ao .NET](relay-hybrid-connections-dotnet-get-started.md)
- [Introdução ao nó](relay-hybrid-connections-node-get-started.md)